!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.JsonRefs=e()}}(function(){var e;return function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return o(r?r:t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";function n(e){var t;return d(e,"Array")?(t=[],e.forEach(function(e,r){t[r]=n(e)})):d(e,"Object")?(t={},Object.keys(e).forEach(function(r){t[r]=n(e[r])})):t=e,t}function o(e,t){function r(e){Object.keys(e).forEach(function(t){n[t]=e[t]})}var n={};return r(N.parse(e||"")),r(N.parse(t||"")),0===Object.keys(n).length?void 0:N.stringify(n)}function i(e,t){d(e,"String")&&(e=F(e)),d(t,"String")&&(t=F(t));var r,n,i=m(d(t,"Undefined")?"":t);return $.indexOf(i.reference)>-1?n=i:(r=d(e,"Undefined")?void 0:m(e),d(r,"Undefined")?n=i:(n=r,n.path=U.join(r.path,i.path),n.query=o(r.query,i.query))),n.fragment=void 0,(-1===$.indexOf(n.reference)&&0===n.path.indexOf("../")?"../":"")+q.serialize(n)}function s(e,t){var r,n=[];return t.length>0&&(r=e,t.slice(0,t.length-1).forEach(function(e){e in r&&(r=r[e],n.push(r))})),n}function a(e,t,r,o,i,s,a,f,p){var l,h;if(r.length>0)try{l=c(t,r)}catch(y){"remote"===e&&(o.error=y.message,o.missing=!0)}else l=t;return d(l,"Undefined")||(o.value=l),d(l,"Array")||d(l,"Object")?(h=n(i),"local"===e?(delete h.subDocPath,t=l):(h.relativeBase=U.dirname(s[s.length-1]),0===r.length?delete h.subDocPath:h.subDocPath=r),u(t,h,s,a,f,p)):void 0}function u(e,t,r,n,o,s){var u=Promise.resolve(),c=n.length?_(n[n.length-1]):[],f=C(e,t),p=t.subDocPath||[],h=A(p),y=["#"];return r.forEach(function(e,t){"#"!==e.charAt(0)&&y.push(n[t])}),y.reverse(),"#"!==(r[r.length-1]||"").charAt(0)&&(o.documents[A(c)]=e),Object.keys(f).forEach(function(v){var m,g,b,w,x=f[v];b=0===r.length?c.concat(_(v)):c.concat(_(v).slice(0===r.length?0:p.length)),w=A(b),d(o[w],"Undefined")&&(o.refs[w]=f[v],d(x.error,"Undefined")&&"invalid"!==x.type&&(L.indexOf(x.type)>-1?(m=i(t.relativeBase,x.uri),g=r.indexOf(m)):(m=x.uri,g=n.indexOf(m)),x.ancestorPtrs=y,x.indirect=s,-1===g?L.indexOf(x.type)>-1?u=u.then(function(){return l(m,t).then(function(e){return a("remote",e,d(x.uriDetails.fragment,"Undefined")?[]:_(decodeURI(x.uriDetails.fragment)),x,t,r.concat(m),n.concat(w),o,s)})["catch"](function(e){x.error=e.message,x.missing=!0})}):0!==w.indexOf(m+"/")&&w!==m&&0!==h.indexOf(m+"/")&&h!==m?0!==m.indexOf(h+"/")&&(u=u.then(function(){return a("local",e,_(m),x,t,r.concat(m),n.concat(w),o,s||-1===m.indexOf(h+"/")&&m!==h)})):x.circular=!0:(n.slice(g).forEach(function(e){o.refs[e].circular=!0}),x.circular=!0)))}),u=u.then(function(){return o})}function c(e,t){var r=e;return t.forEach(function(e){if(e=decodeURI(e),!(e in r))throw Error("JSON Pointer points to missing location: "+A(t));r=r[e]}),r}function f(e){return Object.keys(e).filter(function(e){return"$ref"!==e})}function p(e){var t;switch(e.uriDetails.reference){case"absolute":case"uri":t="remote";break;case"same-document":t="local";break;default:t=e.uriDetails.reference}return t}function l(e,t){var r=H[e],o=Promise.resolve(),i=n(t.loaderOptions||{});return d(r,"Undefined")?(d(i.processContent,"Undefined")&&(i.processContent=function(e,t){t(void 0,JSON.parse(e.text))}),o=I.load(decodeURI(e),i),o=o.then(function(t){return H[e]={value:t},t})["catch"](function(t){throw H[e]={error:t},t})):o=o.then(function(){return r.value}),o=o.then(function(e){return n(e)})}function h(e,t){var r=!0;try{if(!d(e,"Object"))throw new Error("obj is not an Object");if(!d(e.$ref,"String"))throw new Error("obj.$ref is not a String")}catch(n){if(t)throw n;r=!1}return r}function d(e,t){return"Undefined"===t?"undefined"==typeof e:Object.prototype.toString.call(e)==="[object "+t+"]"}function y(e){var t,r;return d(e.filter,"Array")||d(e.filter,"String")?(r=d(e.filter,"String")?[e.filter]:e.filter,t=function(e){return r.indexOf(e.type)>-1||r.indexOf(p(e))>-1}):d(e.filter,"Function")?t=e.filter:d(e.filter,"Undefined")&&(t=function(){return!0}),function(r,n){return("invalid"!==r.type||e.includeInvalid===!0)&&t(r,n)}}function v(e){var t;return d(e.subDocPath,"Array")?t=e.subDocPath:d(e.subDocPath,"String")?t=_(e.subDocPath):d(e.subDocPath,"Undefined")&&(t=[]),t}function m(e){return q.parse(encodeURI(decodeURI(e)))}function g(e,t,r){c(e,t.slice(0,t.length-1))[decodeURI(t[t.length-1])]=r}function b(e,t,r,n){function o(t,o){r.push(o),b(e,t,r,n),r.pop()}var i=!0;d(n,"Function")&&(i=n(e,t,r)),-1===e.indexOf(t)&&(e.push(t),i!==!1&&(d(t,"Array")?t.forEach(function(e,t){o(e,t.toString())}):d(t,"Object")&&Object.keys(t).forEach(function(e){o(t[e],e)}))),e.pop()}function w(e,t){if(e=d(e,"Undefined")?{}:n(e),!d(e,"Object"))throw new TypeError("options must be an Object");if(!(d(e.filter,"Undefined")||d(e.filter,"Array")||d(e.filter,"Function")||d(e.filter,"String")))throw new TypeError("options.filter must be an Array, a Function of a String");if(!d(e.includeInvalid,"Undefined")&&!d(e.includeInvalid,"Boolean"))throw new TypeError("options.includeInvalid must be a Boolean");if(!d(e.refPreProcessor,"Undefined")&&!d(e.refPreProcessor,"Function"))throw new TypeError("options.refPreProcessor must be a Function");if(!d(e.refPostProcessor,"Undefined")&&!d(e.refPostProcessor,"Function"))throw new TypeError("options.refPostProcessor must be a Function");if(!d(e.subDocPath,"Undefined")&&!d(e.subDocPath,"Array")&&!P(e.subDocPath))throw new TypeError("options.subDocPath must be an Array of path segments or a valid JSON Pointer");if(e.filter=y(e),e.subDocPath=v(e),!d(t,"Undefined"))try{c(t,e.subDocPath)}catch(r){throw r.message=r.message.replace("JSON Pointer","options.subDocPath"),r}return e}function x(){H={}}function E(e){if(!d(e,"Array"))throw new TypeError("path must be an array");return e.map(function(e){return d(e,"String")||(e=JSON.stringify(e)),decodeURI(e.replace(/~1/g,"/").replace(/~0/g,"~"))})}function j(e){if(!d(e,"Array"))throw new TypeError("path must be an array");return e.map(function(e){return d(e,"String")||(e=JSON.stringify(e)),e.replace(/~/g,"~0").replace(/\//g,"~1")})}function C(e,t){var r={};if(!d(e,"Array")&&!d(e,"Object"))throw new TypeError("obj must be an Array or an Object");return t=w(t,e),b(s(e,t.subDocPath),c(e,t.subDocPath),n(t.subDocPath),function(e,o,i){var s,a=!0;return h(o)&&(d(t.refPreProcessor,"Undefined")||(o=t.refPreProcessor(n(o),i)),s=S(o),d(t.refPostProcessor,"Undefined")||(s=t.refPostProcessor(s,i)),t.filter(s,i)&&(r[A(i)]=s),f(o).length>0&&(a=!1)),a}),r}function O(e,t){var r=Promise.resolve();return r=r.then(function(){if(!d(e,"String"))throw new TypeError("location must be a string");return t=w(t),e=i(t.relativeBase,e),l(e,t)}).then(function(r){var o=n(H[e]),i=n(t),s=m(e);return d(o.refs,"Undefined")&&(delete i.filter,delete i.subDocPath,i.includeInvalid=!0,H[e].refs=C(r,i)),d(t.filter,"Undefined")||(i.filter=t.filter),d(s.fragment,"Undefined")?d(s.subDocPath,"Undefined")||(i.subDocPath=t.subDocPath):i.subDocPath=_(decodeURI(s.fragment)),{refs:C(r,i),value:r}})}function S(e){var t,r,n,o={def:e};try{h(e,!0)?(t=e.$ref,n=z[t],d(n,"Undefined")&&(n=z[t]=m(t)),o.uri=t,o.uriDetails=n,d(n.error,"Undefined")?o.type=p(o):(o.error=o.uriDetails.error,o.type="invalid"),r=f(e),r.length>0&&(o.warning="Extra JSON Reference properties will be ignored: "+r.join(", "))):o.type="invalid"}catch(i){o.error=i.message,o.type="invalid"}return o}function P(e,t){var r,n=!0;try{if(!d(e,"String"))throw new Error("ptr is not a String");if(""!==e){if(r=e.charAt(0),-1===["#","/"].indexOf(r))throw new Error("ptr must start with a / or #/");if("#"===r&&"#"!==e&&"/"!==e.charAt(1))throw new Error("ptr must start with a / or #/");if(e.match(k))throw new Error("ptr has invalid token(s)")}}catch(o){if(t===!0)throw o;n=!1}return n}function T(e,t){return h(e,t)&&"invalid"!==S(e,t).type}function _(e){if(!P(e))throw new Error("ptr must be a JSON Pointer");var t=e.split("/");return t.shift(),E(t)}function A(e,t){if(!d(e,"Array"))throw new Error("path must be an Array");return(t!==!1?"#":"")+(e.length>0?"/":"")+j(e).join("/")}function D(e,t){var r=Promise.resolve();return r=r.then(function(){if(!d(e,"Array")&&!d(e,"Object"))throw new TypeError("obj must be an Array or an Object");t=w(t,e),e=n(e)}).then(function(){return u(e,t,[],[],{documents:{},refs:{}})}).then(function(t){function r(e,t){return _(e).length-_(t).length}var n={},o={};return Object.keys(t.refs).sort(r).forEach(function(r){var i=t.refs[r];i.indirect||(o[r]=i),delete i.indirect,d(i.error,"Undefined")&&"invalid"!==i.type?(d(i.value,"Undefined")&&i.circular&&(i.value=i.def),d(i.value,"Undefined")?n[r]=i:("#"===r?e=i.value:g(e,_(r),i.value),delete i.ancestorPtrs)):delete i.ancestorPtrs}),Object.keys(n).forEach(function(r){var o=n[r];o.ancestorPtrs.forEach(function(n,i){if(d(o.value,"Undefined"))try{o.value=c(t.documents[n],_(o.uri)),delete o.ancestorPtrs,g(e,_(r),o.value)}catch(s){i===o.ancestorPtrs.length-1&&(o.error=s.message,o.missing=!0,delete o.ancestorPtrs)}})}),{refs:o,resolved:e}})}function R(e,t){var r=Promise.resolve();return r=r.then(function(){if(!d(e,"String"))throw new TypeError("location must be a string");return t=w(t),e=i(t.relativeBase,e),l(e,t)}).then(function(r){var o=n(t),i=m(e);return d(i.fragment,"Undefined")||(o.subDocPath=_(decodeURI(i.fragment))),o.relativeBase=U.dirname(e),D(r,o).then(function(e){return{refs:e.refs,resolved:e.resolved,value:r}})})}var U=e("path"),I=e("path-loader"),N=e("querystring"),F=e("slash"),q=e("uri-js"),k=/~(?:[^01]|$)/g,H={},L=["relative","remote"],$=["absolute","uri"],z={};"undefined"==typeof Promise&&e("native-promise-only"),t.exports.clearCache=x,t.exports.decodePath=E,t.exports.encodePath=j,t.exports.findRefs=C,t.exports.findRefsAt=O,t.exports.getRefDetails=S,t.exports.isPtr=P,t.exports.isRef=T,t.exports.pathFromPtr=_,t.exports.pathToPtr=A,t.exports.resolveRefs=D,t.exports.resolveRefsAt=R},{"native-promise-only":44,path:45,"path-loader":46,querystring:53,slash:55,"uri-js":62}],2:[function(e,t,r){function n(e){return e?o(e):void 0}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],3:[function(e,t,r){"use strict";var n,o=e("es5-ext/object/assign"),i=e("es5-ext/object/normalize-options"),s=e("es5-ext/object/is-callable"),a=e("es5-ext/string/#/contains");n=t.exports=function(e,t){var r,n,s,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(r=s=!0,n=!1):(r=a.call(e,"c"),n=a.call(e,"e"),s=a.call(e,"w")),c={value:t,configurable:r,enumerable:n,writable:s},u?o(i(u),c):c},n.gs=function(e,t,r){var n,u,c,f;return"string"!=typeof e?(c=r,r=t,t=e,e=null):c=arguments[3],null==t?t=void 0:s(t)?null==r?r=void 0:s(r)||(c=r,r=void 0):(c=t,t=r=void 0),null==e?(n=!0,u=!1):(n=a.call(e,"c"),u=a.call(e,"e")),f={get:t,set:r,configurable:n,enumerable:u},c?o(i(c),f):f}},{"es5-ext/object/assign":15,"es5-ext/object/is-callable":18,"es5-ext/object/normalize-options":22,"es5-ext/string/#/contains":26}],4:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":5,"./shim":6}],5:[function(e,t,r){"use strict";t.exports=function(){var e,t,r=Array.from;return"function"!=typeof r?!1:(e=["raz","dwa"],t=r(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},{}],6:[function(e,t,r){"use strict";var n=e("es6-symbol").iterator,o=e("../../function/is-arguments"),i=e("../../function/is-function"),s=e("../../number/to-pos-integer"),a=e("../../object/valid-callable"),u=e("../../object/valid-value"),c=e("../../string/is-string"),f=Array.isArray,p=Function.prototype.call,l={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;t.exports=function(e){var t,r,d,y,v,m,g,b,w,x,E=arguments[1],j=arguments[2];if(e=Object(u(e)),null!=E&&a(E),this&&this!==Array&&i(this))t=this;else{if(!E){if(o(e))return v=e.length,1!==v?Array.apply(null,e):(y=new Array(1),y[0]=e[0],y);if(f(e)){for(y=new Array(v=e.length),r=0;v>r;++r)y[r]=e[r];return y}}y=[]}if(!f(e))if(void 0!==(w=e[n])){for(g=a(w).call(e),t&&(y=new t),b=g.next(),r=0;!b.done;)x=E?p.call(E,j,b.value,r):b.value,t?(l.value=x,h(y,r,l)):y[r]=x,b=g.next(),++r;v=r}else if(c(e)){for(v=e.length,t&&(y=new t),r=0,d=0;v>r;++r)x=e[r],v>r+1&&(m=x.charCodeAt(0),m>=55296&&56319>=m&&(x+=e[++r])),x=E?p.call(E,j,x,d):x,t?(l.value=x,h(y,d,l)):y[d]=x,++d;v=d}if(void 0===v)for(v=s(e.length),t&&(y=new t(v)),r=0;v>r;++r)x=E?p.call(E,j,e[r],r):e[r],t?(l.value=x,h(y,r,l)):y[r]=x;return t&&(l.value=null,y.length=v),y}},{"../../function/is-arguments":7,"../../function/is-function":8,"../../number/to-pos-integer":14,"../../object/valid-callable":24,"../../object/valid-value":25,"../../string/is-string":29,"es6-symbol":30}],7:[function(e,t,r){"use strict";var n=Object.prototype.toString,o=n.call(function(){return arguments}());t.exports=function(e){return n.call(e)===o}},{}],8:[function(e,t,r){"use strict";var n=Object.prototype.toString,o=n.call(e("./noop"));t.exports=function(e){return"function"==typeof e&&n.call(e)===o}},{"./noop":9}],9:[function(e,t,r){"use strict";t.exports=function(){}},{}],10:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":11,"./shim":12}],11:[function(e,t,r){"use strict";t.exports=function(){var e=Math.sign;return"function"!=typeof e?!1:1===e(10)&&-1===e(-20)}},{}],12:[function(e,t,r){"use strict";t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],13:[function(e,t,r){"use strict";var n=e("../math/sign"),o=Math.abs,i=Math.floor;t.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?n(e)*i(o(e)):e)}},{"../math/sign":10}],14:[function(e,t,r){"use strict";var n=e("./to-integer"),o=Math.max;t.exports=function(e){return o(0,n(e))}},{"./to-integer":13}],15:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(e,t,r){"use strict";t.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],17:[function(e,t,r){"use strict";var n=e("../keys"),o=e("../valid-value"),i=Math.max;t.exports=function(e,t){var r,s,a,u=i(arguments.length,2);for(e=Object(o(e)),a=function(n){try{e[n]=t[n]}catch(o){r||(r=o)}},s=1;u>s;++s)t=arguments[s],n(t).forEach(a);if(void 0!==r)throw r;return e}},{"../keys":19,"../valid-value":25}],18:[function(e,t,r){"use strict";t.exports=function(e){return"function"==typeof e}},{}],19:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":20,"./shim":21}],20:[function(e,t,r){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],21:[function(e,t,r){"use strict";var n=Object.keys;t.exports=function(e){return n(null==e?e:Object(e))}},{}],22:[function(e,t,r){"use strict";var n=Array.prototype.forEach,o=Object.create,i=function(e,t){var r;for(r in e)t[r]=e[r]};t.exports=function(e){var t=o(null);return n.call(arguments,function(e){null!=e&&i(Object(e),t)}),t}},{}],23:[function(e,t,r){"use strict";var n=Array.prototype.forEach,o=Object.create;t.exports=function(e){var t=o(null);return n.call(arguments,function(e){t[e]=!0}),t}},{}],24:[function(e,t,r){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],25:[function(e,t,r){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],26:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":27,"./shim":28}],27:[function(e,t,r){"use strict";var n="razdwatrzy";t.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},{}],28:[function(e,t,r){"use strict";var n=String.prototype.indexOf;t.exports=function(e){return n.call(this,e,arguments[1])>-1}},{}],29:[function(e,t,r){"use strict";var n=Object.prototype.toString,o=n.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===o)||!1}},{}],30:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Symbol:e("./polyfill")},{"./is-implemented":31,"./polyfill":33}],31:[function(e,t,r){"use strict";t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(t){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"==typeof Symbol.unscopables}},{}],32:[function(e,t,r){"use strict";t.exports=function(e){return e&&("symbol"==typeof e||"Symbol"===e["@@toStringTag"])||!1}},{}],33:[function(e,t,r){"use strict";var n,o,i,s=e("d"),a=e("./validate-symbol"),u=Object.create,c=Object.defineProperties,f=Object.defineProperty,p=Object.prototype,l=u(null);"function"==typeof Symbol&&(n=Symbol);var h=function(){var e=u(null);return function(t){for(var r,n,o=0;e[t+(o||"")];)++o;return t+=o||"",e[t]=!0,r="@@"+t,f(p,r,s.gs(null,function(e){n||(n=!0,f(this,r,s(e)),n=!1)})),r}}();i=function(e){if(this instanceof i)throw new TypeError("TypeError: Symbol is not a constructor");return o(e)},t.exports=o=function d(e){var t;if(this instanceof d)throw new TypeError("TypeError: Symbol is not a constructor");return t=u(i.prototype),e=void 0===e?"":String(e),c(t,{__description__:s("",e),__name__:s("",h(e))})},c(o,{"for":s(function(e){return l[e]?l[e]:l[e]=o(String(e))}),keyFor:s(function(e){var t;a(e);for(t in l)if(l[t]===e)return t}),hasInstance:s("",n&&n.hasInstance||o("hasInstance")),isConcatSpreadable:s("",n&&n.isConcatSpreadable||o("isConcatSpreadable")),iterator:s("",n&&n.iterator||o("iterator")),match:s("",n&&n.match||o("match")),replace:s("",n&&n.replace||o("replace")),search:s("",n&&n.search||o("search")),species:s("",n&&n.species||o("species")),split:s("",n&&n.split||o("split")),toPrimitive:s("",n&&n.toPrimitive||o("toPrimitive")),toStringTag:s("",n&&n.toStringTag||o("toStringTag")),unscopables:s("",n&&n.unscopables||o("unscopables"))}),c(i.prototype,{constructor:s(o),toString:s("",function(){return this.__name__})}),c(o.prototype,{toString:s(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:s(function(){return a(this)})}),f(o.prototype,o.toPrimitive,s("",function(){return a(this)})),f(o.prototype,o.toStringTag,s("c","Symbol")),f(i.prototype,o.toStringTag,s("c",o.prototype[o.toStringTag])),f(i.prototype,o.toPrimitive,s("c",o.prototype[o.toPrimitive]))},{"./validate-symbol":34,d:3}],34:[function(e,t,r){"use strict";var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":32}],35:[function(e,t,r){"use strict";var n,o,i,s,a,u,c,f,p,l,h=e("esniff");a=function(e){return"\\"===e?u:"$"===e?c:(o+=e,a)},u=function(e){return"\\"!==e&&"$"!==e&&(o+="\\"),o+=e,a},c=function(e){return"{"===e?(i.push(o),o="",f):"$"===e?(o+="$",c):(o+="$"+e,a)},f=function(e){var t,r=l.slice(n);return h(r,"}",function(e){return h.nest>=0?h.next():void(t=e)}),null!=t?(s.push(l.slice(n,n+t)),n+=t,o="",a):(t=r.length,n+=t,o+=r,f)},p=function(e){return"\\"!==e&&"}"!==e&&(o+="\\"),o+=e,f},t.exports=function(e){var t,r,h;for(o="",i=[],s=[],l=String(e),t=l.length,r=a,n=0;t>n;++n)r=r(l[n]);return r===a?i.push(o):r===u?i.push(o+"\\"):r===c?i.push(o+"$"):r===f?i[i.length-1]+="${"+o:r===p&&(i[i.length-1]+="${"+o+"\\"),h={literals:i,substitutions:s},i=s=null,h}},{esniff:40}],36:[function(e,t,r){"use strict";var n=e("./compile"),o=e("./resolve-to-string");t.exports=function(e,t){return o(n(e),t,arguments[2])}},{"./compile":35,"./resolve-to-string":38}],37:[function(e,t,r){"use strict";var n=Array.prototype.reduce;t.exports=function(e){var t=arguments;return n.call(e,function(e,r,n){return e+(void 0===t[n]?"":String(t[n]))+r})}},{}],38:[function(e,t,r){"use strict";var n=e("./resolve"),o=e("./passthru");t.exports=function(e,t){return o.apply(null,n(e,t,arguments[2]))}},{"./passthru":37,"./resolve":39}],39:[function(e,t,r){"use strict";var n=e("es5-ext/object/valid-value"),o=e("es5-ext/object/normalize-options"),i=Array.prototype.map,s=Object.keys,a=JSON.stringify;t.exports=function(e,t){var r,u,c,f=Object(arguments[2]);return n(e)&&n(e.literals)&&n(e.substitutions),t=o(t),r=s(t),u=r.join(", "),c=r.map(function(e){return t[e]}),[e.literals].concat(i.call(e.substitutions,function(e){var t;if(e){try{t=new Function(u,"return ("+e+")")}catch(r){throw new TypeError("Unable to compile expression:\n	args: "+a(u)+"\n	body: "+a(e)+"\n	error: "+r.stack)}try{return t.apply(null,c)}catch(r){if(f.partial)return"${"+e+"}";throw new TypeError("Unable to resolve expression:\n	args: "+a(u)+"\n	body: "+a(e)+"\n	error: "+r.stack)}}}))}},{"es5-ext/object/normalize-options":22,"es5-ext/object/valid-value":25}],40:[function(e,t,r){"use strict";var n,o,i,s,a,u,c,f,p,l,h,d,y,v,m,g,b,w,x,E,j,C,O,S,P,T,_,A=e("es5-ext/array/from"),D=e("es5-ext/object/primitive-set"),R=e("es5-ext/object/valid-value"),U=e("es5-ext/object/valid-callable"),I=e("d"),N=e("./lib/ws-eol"),F=e("./lib/ws"),q=Object.prototype.hasOwnProperty,k=D.apply(null,A(";{=([,<>+-*/%&|^!~?:}")),H=D.apply(null,A(";{=([,<>+-*/%&|^!~?:})]."));n=function(e){if(d&&!(h>=e))for(;h!==e;){if(!d)return;q.call(F,d)?q.call(N,d)&&(v=h,++y):g=d,d=E[++h]}},o=function(e){null!=P&&w.push([T,P,e]),T={point:h+1,line:y,column:h+1-v},P=h},i=function(){var e;return T.raw=E.slice(P,h),x.push(T),w.length?(e=w.pop(),T=e[0],P=e[1],void(_=e[2])):(T=null,P=null,void(_=null))},s=function(){var e=_;return _=b,++b,n(h+1),o(e),a},u=function(){if("'"===d||'"'===d)return S=d,d=E[++h],c;if("("===d||"{"===d||"["===d)++b;else if(")"===d||"}"===d||"]"===d)_===--b&&i();else if("/"===d&&q.call(k,g))return d=E[++h],l;return d!==j||!C&&g&&!m&&!q.call(H,g)?(g=d,d=E[++h],a):O(h,g,b)},f=function(){for(;;){if(!d)return;if(q.call(N,d))return v=h+1,void++y;d=E[++h]}},p=function(){for(;;){if(!d)return;if("*"!==d)q.call(N,d)&&(v=h+1,++y),d=E[++h];else if(d=E[++h],"/"===d)return}},a=function(){var e;for(m=!1;;){if(!d)return;if(q.call(F,d))m=!0,q.call(N,d)&&(v=h+1,++y);else{if("/"!==d)break;if(e=E[h+1],"/"===e)d=E[h+=2],m=!0,f();else{if("*"!==e)break;d=E[h+=2],m=!0,p()}}d=E[++h]}return u},c=function(){for(;;){if(!d)return;if(d===S)return d=E[++h],g=S,a;"\\"===d&&q.call(N,E[++h])&&(v=h+1,++y),d=E[++h]}},l=function(){for(;;){if(!d)return;if("/"===d)return g="/",d=E[++h],a;"\\"===d&&++h,d=E[++h]}},t.exports=r=function(e,t,n){var o;if(E=String(R(e)),j=String(R(t)),1!==j.length)throw new TypeError(j+" should be one character long string");for(O=U(n),C=q.call(H,j),h=0,d=E[h],y=1,v=0,m=!1,g=null,b=0,w=[],x=[],r.forceStop=!1,o=a;o;)o=o();return x},Object.defineProperties(r,{$ws:I(a),$common:I(u),collectNest:I(s),move:I(n),index:I.gs(function(){return h}),line:I.gs(function(){return y}),nest:I.gs(function(){return b}),columnIndex:I.gs(function(){return v}),next:I(function(e){return d?(n(h+(e||1)),a()):void 0}),resume:I(function(){return u})})},{"./lib/ws":43,"./lib/ws-eol":41,d:3,"es5-ext/array/from":4,"es5-ext/object/primitive-set":23,"es5-ext/object/valid-callable":24,"es5-ext/object/valid-value":25}],41:[function(e,t,r){"use strict";var n=e("es5-ext/array/from"),o=e("es5-ext/object/primitive-set");t.exports=o.apply(null,n("\n\r\u2028\u2029"))},{"es5-ext/array/from":4,"es5-ext/object/primitive-set":23}],42:[function(e,t,r){"use strict";var n=e("es5-ext/array/from"),o=e("es5-ext/object/primitive-set");t.exports=o.apply(null,n(" \f	\x0B​  ​᠎ ​  ​  ​  ​  ​  ​​​  ​　"))},{"es5-ext/array/from":4,"es5-ext/object/primitive-set":23}],43:[function(e,t,r){"use strict";var n=e("es5-ext/object/primitive-set"),o=e("./ws-eol"),i=e("./ws-inline");t.exports=n.apply(null,Object.keys(o).concat(Object.keys(i)))},{"./ws-eol":41,"./ws-inline":42,"es5-ext/object/primitive-set":23}],44:[function(t,r,n){(function(t){!function(t,n,o){n[t]=n[t]||o(),"undefined"!=typeof r&&r.exports?r.exports=n[t]:"function"==typeof e&&e.amd&&e(function(){return n[t]})}("Promise","undefined"!=typeof t?t:this,function(){"use strict";function e(e,t){l.add(e,t),p||(p=d(l.drain))}function t(e){var t,r=typeof e;return null==e||"object"!=r&&"function"!=r||(t=e.then),"function"==typeof t?t:!1}function r(){for(var e=0;e<this.chain.length;e++)n(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function n(e,r,n){var o,i;try{r===!1?n.reject(e.msg):(o=r===!0?e.msg:r.call(void 0,e.msg),o===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=t(o))?i.call(o,n.resolve,n.reject):n.resolve(o))}catch(s){n.reject(s)}}function o(n){var s,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(s=t(n))?e(function(){var e=new a(u);try{s.call(n,function(){o.apply(e,arguments)},function(){i.apply(e,arguments)})}catch(t){i.call(e,t)}}):(u.msg=n,u.state=1,u.chain.length>0&&e(r,u))}catch(c){i.call(new a(u),c)}}}function i(t){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=t,n.state=2,n.chain.length>0&&e(r,n))}function s(e,t,r,n){for(var o=0;o<t.length;o++)!function(o){e.resolve(t[o]).then(function(e){r(o,e)},n)}(o)}function a(e){this.def=e,this.triggered=!1}function u(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new u(this);this.then=function(t,o){var i={success:"function"==typeof t?t:!0,failure:"function"==typeof o?o:!1};return i.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");i.resolve=e,i.reject=t}),n.chain.push(i),0!==n.state&&e(r,n),i.promise},this["catch"]=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){o.call(n,e)},function(e){i.call(n,e)})}catch(s){i.call(n,s)}}var f,p,l,h=Object.prototype.toString,d="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),f=function(e,t,r,n){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:n!==!1})}}catch(y){f=function(e,t,r){return e[t]=r,e}}l=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,r,n;return{add:function(o,i){n=new e(o,i),r?r.next=n:t=n,r=n,n=void 0},drain:function(){var e=t;for(t=r=p=void 0;e;)e.fn.call(e.self),e=e.next}}}();var v=f({},"constructor",c,!1);return c.prototype=v,f(v,"__NPO__",0,!1),f(c,"resolve",function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");t(e)})}),f(c,"reject",function(e){return new this(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");r(e)})}),f(c,"all",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var o=e.length,i=Array(o),a=0;s(t,e,function(e,t){i[e]=t,++a===o&&r(i)},n)})}),f(c,"race",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):new t(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");s(t,e,function(e,t){r(t)},n)})}),c})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};r.resolve=function(){for(var r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,o="/"===s.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+r||"."},r.normalize=function(e){var o=r.isAbsolute(e),i="/"===s(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var o=n(e.split("/")),i=n(t.split("/")),s=Math.min(o.length,i.length),a=s,u=0;s>u;u++)if(o[u]!==i[u]){a=u;break}for(var c=[],u=a;u<o.length;u++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return i(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:50}],46:[function(e,t,r){"use strict";function n(e){return"undefined"!=typeof e&&(e=-1===e.indexOf("://")?"":e.split("://")[0]),e}function o(e){var t=n(e),r=i[t];if("undefined"==typeof r){if(""!==t)throw new Error("Unsupported scheme: "+t);r=s}return r}var i={file:e("./lib/loaders/file"),http:e("./lib/loaders/http"),https:e("./lib/loaders/http")},s="object"==typeof window||"function"==typeof importScripts?i.http:i.file;"undefined"==typeof Promise&&e("native-promise-only"),t.exports.load=function(e,t){var r=Promise.resolve();return"undefined"==typeof t&&(t={}),r=r.then(function(){if("undefined"==typeof e)throw new TypeError("location is required");if("string"!=typeof e)throw new TypeError("location must be a string");if("undefined"!=typeof t){if("object"!=typeof t)throw new TypeError("options must be an object");if("undefined"!=typeof t.processContent&&"function"!=typeof t.processContent)throw new TypeError("options.processContent must be a function")}}),r=r.then(function(){
return new Promise(function(r,n){var i=o(e);i.load(e,t||{},function(e,t){e?n(e):r(t)})})}).then(function(e){return t.processContent?new Promise(function(r,n){t.processContent("object"==typeof e?e:{text:e},function(e,t){e?n(e):r(t)})}):"object"==typeof e?e.text:e})}},{"./lib/loaders/file":48,"./lib/loaders/http":49,"native-promise-only":44}],47:[function(e,t,r){"use strict";t.exports={templateStr:e("es6-template-strings")}},{"es6-template-strings":36}],48:[function(e,t,r){"use strict";var n=new TypeError("The 'file' scheme is not supported in the browser");t.exports.getBase=function(){throw n},t.exports.load=function(){var e=arguments[arguments.length-1];if("function"!=typeof e)throw n;e(n)}},{}],49:[function(e,t,r){"use strict";var n=e("superagent"),o=e("../helpers"),i=["delete","get","head","patch","post","put"];t.exports.load=function(e,t,r){function s(e,t){e?r(e):("function"==typeof t.buffer&&t.buffer(!0),t.end(function(e,t){e?r(e):r(void 0,t)}))}var a,u,c,f,p,l,h=t.method?t.method.toLowerCase():"get";if("undefined"!=typeof t.method?"string"!=typeof t.method?a=new TypeError("options.method must be a string"):-1===i.indexOf(t.method)&&(a=new TypeError("options.method must be one of the following: "+i.slice(0,i.length-1).join(", ")+" or "+i[i.length-1])):"undefined"!=typeof t.prepareRequest&&"function"!=typeof t.prepareRequest?a=new TypeError("options.prepareRequest must be a function"):"undefined"==typeof t.proxies||t.proxies.length||(a=new TypeError("options.proxies must be an array of {test: RegExp, url: ES2015 template string}")),a)r(a);else{if(t.proxies)for(c=0,l=t.proxies.length;l>c;c++)f=t.proxies[c],p=new RegExp(f.test),p.test(e)&&(e=o.templateStr(f.url,{urlEnc:encodeURIComponent(e),url:e}));if(u=n["delete"===h?"del":h](e),t.prepareRequest)try{t.prepareRequest(u,s)}catch(d){r(d)}else s(void 0,u)}}},{"../helpers":47,superagent:56}],50:[function(e,t,r){function n(){f=!1,a.length?c=a.concat(c):p=-1,c.length&&o()}function o(){if(!f){var e=setTimeout(n);f=!0;for(var t=c.length;t;){for(a=c,c=[];++p<t;)a&&a[p].run();p=-1,t=c.length}a=null,f=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var a,u=t.exports={},c=[],f=!1,p=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new i(e,t)),1!==c.length||f||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],51:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var f=0;c>f;++f){var p,l,h,d,y=e[f].replace(a,"%20"),v=y.indexOf(r);v>=0?(p=y.substr(0,v),l=y.substr(v+1)):(p=y,l=""),h=decodeURIComponent(p),d=decodeURIComponent(l),n(s,h)?o(s[h])?s[h].push(d):s[h]=[s[h],d]:s[h]=d}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],52:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(o(s))+r;return i(e[s])?n(e[s],function(e){return a+encodeURIComponent(o(e))}).join(t):a+encodeURIComponent(o(e[s]))}).join(t):a?encodeURIComponent(o(a))+r+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],53:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":51,"./encode":52}],54:[function(e,t,r){t.exports=function(e,t,r){for(var n=0,o=e.length,i=3==arguments.length?r:e[n++];o>n;)i=t.call(null,i,e[n],++n,e);return i}},{}],55:[function(e,t,r){"use strict";t.exports=function(e){var t=/^\\\\\?\\/.test(e),r=/[^\x00-\x80]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}},{}],56:[function(e,t,r){function n(){}function o(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(e){return e===Object(e)}function s(e){if(!i(e))return e;var t=[];for(var r in e)null!=e[r]&&a(t,r,e[r]);return t.join("&")}function a(e,t,r){return Array.isArray(r)?r.forEach(function(r){a(e,t,r)}):void e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}function u(e){for(var t,r,n={},o=e.split("&"),i=0,s=o.length;s>i;++i)r=o[i],t=r.split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n}function c(e){var t,r,n,o,i=e.split(/\r?\n/),s={};i.pop();for(var a=0,u=i.length;u>a;++a)r=i[a],t=r.indexOf(":"),n=r.slice(0,t).toLowerCase(),o=w(r.slice(t+1)),s[n]=o;return s}function f(e){return/[\/+]json\b/.test(e)}function p(e){return e.split(/ *; */).shift()}function l(e){return b(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e},{})}function h(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function d(e,t){var r=this;g.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new h(r)}catch(n){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=n,e.rawResponse=r.xhr&&r.xhr.responseText?r.xhr.responseText:null,r.callback(e)}if(r.emit("response",t),e)return r.callback(e,t);if(t.status>=200&&t.status<300)return r.callback(e,t);var o=new Error(t.statusText||"Unsuccessful HTTP response");o.original=e,o.response=t,o.status=t.status,r.callback(o,t)})}function y(e,t){return"function"==typeof t?new d("GET",e).end(t):1==arguments.length?new d("GET",e):new d(e,t)}function v(e,t){var r=y("DELETE",e);return t&&r.end(t),r}var m,g=e("emitter"),b=e("reduce");m="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,y.getXHR=function(){if(!(!m.XMLHttpRequest||m.location&&"file:"==m.location.protocol&&m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var w="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};y.serializeObject=s,y.parseString=u,y.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},y.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},y.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},h.prototype.get=function(e){return this.header[e.toLowerCase()]},h.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=p(t);var r=l(t);for(var n in r)this[n]=r[n]},h.prototype.parseBody=function(e){var t=y.parse[this.type];return t&&e&&(e.length||e instanceof Object)?t(e):null},h.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},h.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},y.Response=h,g(d.prototype),d.prototype.use=function(e){return e(this),this},d.prototype.timeout=function(e){return this._timeout=e,this},d.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},d.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},d.prototype.set=function(e,t){if(i(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},d.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},d.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},d.prototype.type=function(e){return this.set("Content-Type",y.types[e]||e),this},d.prototype.parse=function(e){return this._parser=e,this},d.prototype.accept=function(e){return this.set("Accept",y.types[e]||e),this},d.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},d.prototype.query=function(e){return"string"!=typeof e&&(e=s(e)),e&&this._query.push(e),this},d.prototype.field=function(e,t){return this._formData||(this._formData=new m.FormData),this._formData.append(e,t),this},d.prototype.attach=function(e,t,r){return this._formData||(this._formData=new m.FormData),this._formData.append(e,t,r||t.name),this},d.prototype.send=function(e){var t=i(e),r=this.getHeader("Content-Type");if(t&&i(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==r?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||o(e)?this:(r||this.type("json"),this)},d.prototype.callback=function(e,t){var r=this._callback;this.clearTimeout(),r(e,t)},d.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},d.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},d.prototype.withCredentials=function(){return this._withCredentials=!0,this},d.prototype.end=function(e){var t=this,r=this.xhr=y.getXHR(),i=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=e||n,r.onreadystatechange=function(){if(4==r.readyState){var e;try{e=r.status}catch(n){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var u=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(r.onprogress=u);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=u)}catch(c){}if(s&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},s)),i&&(i=y.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!o(a)){var p=this.getHeader("Content-Type"),l=this._parser||y.serialize[p?p.split(";")[0]:""];!l&&f(p)&&(l=y.serialize["application/json"]),l&&(a=l(a))}for(var h in this.header)null!=this.header[h]&&r.setRequestHeader(h,this.header[h]);return this.emit("request",this),r.send("undefined"!=typeof a?a:null),this},d.prototype.then=function(e,t){return this.end(function(r,n){r?t(r):e(n)})},y.Request=d,y.get=function(e,t,r){var n=y("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},y.head=function(e,t,r){var n=y("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},y.del=v,y["delete"]=v,y.patch=function(e,t,r){var n=y("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},y.post=function(e,t,r){var n=y("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},y.put=function(e,t,r){var n=y("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},t.exports=y},{emitter:2,reduce:54}],57:[function(e,t,r){var n=function(){function e(e){throw new RangeError(O[e])}function t(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function r(e,r){var n=e.split("@"),o="";n.length>1&&(o=n[0]+"@",e=n[1]),e=e.replace(C,".");var i=e.split("."),s=t(i,r).join(".");return o+s}function n(e){for(var t,r,n=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function o(e){return t(e,function(e){var t="";return e>65535&&(e-=65536,t+=T(e>>>10&1023|55296),e=56320|1023&e),t+=T(e)}).join("")}function i(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:d}function s(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function a(e,t,r){var n=0;for(e=r?P(e/g):e>>1,e+=P(e/t);e>S*v>>1;n+=d)e=P(e/S);return P(n+(S+1)*e/(e+m))}function u(t){var r,n,s,u,c,f,p,l,m,g,E=[],j=t.length,C=0,O=w,S=b;for(n=t.lastIndexOf(x),0>n&&(n=0),s=0;n>s;++s)t.charCodeAt(s)>=128&&e("not-basic"),E.push(t.charCodeAt(s));for(u=n>0?n+1:0;j>u;){for(c=C,f=1,p=d;u>=j&&e("invalid-input"),l=i(t.charCodeAt(u++)),(l>=d||l>P((h-C)/f))&&e("overflow"),C+=l*f,m=S>=p?y:p>=S+v?v:p-S,!(m>l);p+=d)g=d-m,f>P(h/g)&&e("overflow"),f*=g;r=E.length+1,S=a(C-c,r,0==c),P(C/r)>h-O&&e("overflow"),O+=P(C/r),C%=r,E.splice(C++,0,O)}return o(E)}function c(t){var r,o,i,u,c,f,p,l,m,g,E,j,C,O,S,_=[];for(t=n(t),j=t.length,r=w,o=0,c=b,f=0;j>f;++f)E=t[f],128>E&&_.push(T(E));for(i=u=_.length,u&&_.push(x);j>i;){for(p=h,f=0;j>f;++f)E=t[f],E>=r&&p>E&&(p=E);for(C=i+1,p-r>P((h-o)/C)&&e("overflow"),o+=(p-r)*C,r=p,f=0;j>f;++f)if(E=t[f],r>E&&++o>h&&e("overflow"),E==r){for(l=o,m=d;g=c>=m?y:m>=c+v?v:m-c,!(g>l);m+=d)S=l-g,O=d-g,_.push(T(s(g+S%O,0))),l=P(S/O);_.push(T(s(l,0))),c=a(o,C,i==u),o=0,++i}++o,++r}return _.join("")}function f(e){return r(e,function(e){return E.test(e)?u(e.slice(4).toLowerCase()):e})}function p(e){return r(e,function(e){return j.test(e)?"xn--"+c(e):e})}var l,h=2147483647,d=36,y=1,v=26,m=38,g=700,b=72,w=128,x="-",E=/^xn--/,j=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=d-y,P=Math.floor,T=String.fromCharCode;return l={version:"1.3.2",ucs2:{decode:n,encode:o},decode:u,encode:c,toASCII:p,toUnicode:f}}();"undefined"==typeof COMPILED&&"undefined"!=typeof t&&(t.exports=n)},{}],58:[function(e,t,r){e("./schemes/http"),e("./schemes/urn"),e("./schemes/mailto")},{"./schemes/http":59,"./schemes/mailto":60,"./schemes/urn":61}],59:[function(e,t,r){if("undefined"==typeof COMPILED&&"undefined"==typeof n&&"function"==typeof e)var n=e("../uri");n.SCHEMES.http=n.SCHEMES.https={domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}}},{"../uri":62}],60:[function(e,t,r){if("undefined"==typeof COMPILED&&"undefined"==typeof n&&"function"==typeof e)var n=e("../uri"),o=e("../punycode");!function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(e.length>1){e[0]=e[0].slice(0,-1);for(var r=e.length-1,n=1;r>n;++n)e[n]=e[n].slice(1,-1);return e[r]=e[r].slice(1),e.join("")}return e[0]}function t(e){return"(?:"+e+")"}function r(e){return e.toUpperCase()}function i(e){var t=n.pctDecChars(e);return t.match(D)?t:e}function s(e){return void 0!==e&&null!==e?e instanceof Array&&!e.callee?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}var a={},u=n.IRI_SUPPORT,c="[A-Za-z0-9\\-\\.\\_\\~"+(u?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",f="[0-9A-Fa-f]",p=t(t("%[EFef]"+f+"%"+f+f+"%"+f+f)+"|"+t("%[89A-Fa-f]"+f+"%"+f+f)+"|"+t("%"+f+f)),l="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",h="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",d=e(h,'[\\"\\\\]'),y=t(l+"+"+t("\\."+l+"+")+"*"),v=t("\\\\"+d),m=t(h+"|"+v),g=t('\\"'+m+'*\\"'),b="[\\x21-\\x5A\\x5E-\\x7E]",w="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",x=t(c+"|"+p+"|"+w),E=t(y+"|\\["+b+"*\\]"),j=t(y+"|"+g),C=t(j+"\\@"+E),O=t(C+t("\\,"+C)+"*"),S=t(x+"*"),P=S,T=t(S+"\\="+P),_=t(T+t("\\&"+T)+"*"),A=t("\\?"+_),D=(n.VALIDATE_SUPPORT&&new RegExp("^mailto\\:"+O+"?"+A+"?$"),new RegExp(c,"g")),R=new RegExp(p,"g"),U=new RegExp(e("[^]",l,"[\\.]",'[\\"]',d),"g"),I=new RegExp(e("[^]",l,"[\\.]","[\\[]",b,"[\\]]"),"g"),N=new RegExp(e("[^]",c,w),"g"),F=N,q=n.VALIDATE_SUPPORT&&new RegExp("^"+O+"$"),k=n.VALIDATE_SUPPORT&&new RegExp("^"+_+"$");n.SCHEMES.mailto={parse:function(e,t){n.VALIDATE_SUPPORT&&!e.error&&(e.path&&!q.test(e.path)?e.error="Email address is not valid":e.query&&!k.test(e.query)&&(e.error="Header fields are invalid"));var r=e.to=e.path?e.path.split(","):[];if(e.path=void 0,e.query){for(var i=!1,s={},a=e.query.split("&"),u=0,c=a.length;c>u;++u){var f=a[u].split("=");switch(f[0]){case"to":for(var p=f[1].split(","),l=0,h=p.length;h>l;++l)r.push(p[l]);break;case"subject":e.subject=n.unescapeComponent(f[1],t);break;case"body":e.body=n.unescapeComponent(f[1],t);break;default:i=!0,s[n.unescapeComponent(f[0],t)]=n.unescapeComponent(f[1],t)}}i&&(e.headers=s)}e.query=void 0;for(var u=0,c=r.length;c>u;++u){var d=r[u].split("@");if(d[0]=n.unescapeComponent(d[0]),"undefined"==typeof o||t.unicodeSupport)d[1]=n.unescapeComponent(d[1],t).toLowerCase();else try{d[1]=o.toASCII(n.unescapeComponent(d[1],t).toLowerCase())}catch(y){e.error=e.error||"Email address's domain name can not be converted to ASCII via punycode: "+y}r[u]=d.join("@")}return e},serialize:function(e,t){var u=s(e.to);if(u){for(var c=0,f=u.length;f>c;++c){var p=String(u[c]),l=p.lastIndexOf("@"),h=p.slice(0,l),d=p.slice(l+1);if(h=h.replace(R,i).replace(R,r).replace(U,n.pctEncChar),"undefined"!=typeof o)try{d=t.iri?o.toUnicode(d):o.toASCII(n.unescapeComponent(d,t).toLowerCase())}catch(y){e.error=e.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+y}else d=d.replace(R,i).toLowerCase().replace(R,r).replace(I,n.pctEncChar);u[c]=h+"@"+d}e.path=u.join(",")}var v=e.headers=e.headers||{};e.subject&&(v.subject=e.subject),e.body&&(v.body=e.body);var m=[];for(var g in v)v[g]!==a[g]&&m.push(g.replace(R,i).replace(R,r).replace(N,n.pctEncChar)+"="+v[g].replace(R,i).replace(R,r).replace(F,n.pctEncChar));return m.length&&(e.query=m.join("&")),e}}}()},{"../punycode":57,"../uri":62}],61:[function(e,t,r){if("undefined"==typeof COMPILED&&"undefined"==typeof n&&"function"==typeof e)var n=e("../uri");!function(){var e=n.pctEncChar,t="(?:[0-9A-Za-z][0-9A-Za-z\\-]{1,31})",r="(?:\\%[0-9A-Fa-f]{2})",o="[0-9A-Za-z\\(\\)\\+\\,\\-\\.\\:\\=\\@\\;\\$\\_\\!\\*\\'\\/\\?\\#]",i="(?:(?:"+r+"|"+o+")+)",s=new RegExp("^urn\\:("+t+")$"),a=new RegExp("^("+t+")\\:("+i+")$"),u=/^([^\:]+)\:(.*)/,c=/[\x00-\x20\\\"\&\<\>\[\]\^\`\{\|\}\~\x7F-\xFF]/g,f=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;n.SCHEMES.urn={parse:function(e,t){var r,o,i=e.path.match(a);return i||(t.tolerant||(e.error=e.error||"URN is not strictly valid."),i=e.path.match(u)),i?(r="urn:"+i[1].toLowerCase(),o=n.SCHEMES[r],o||(o=n.SCHEMES[r]={parse:function(e,t){return e},serialize:n.SCHEMES.urn.serialize}),e.scheme=r,e.path=i[2],e=o.parse(e,t)):e.error=e.error||"URN can not be parsed.",e},serialize:function(t,r){var n,o=t.scheme||r.scheme;if(o&&"urn"!==o){var n=o.match(s);n||(n=["urn:"+o,o]),t.scheme="urn",t.path=n[1]+":"+(t.path?t.path.replace(c,e):"")}return t}},n.SCHEMES["urn:uuid"]={parse:function(e,t){return t.tolerant||e.path&&e.path.match(f)||(e.error=e.error||"UUID is not valid."),e},serialize:function(e,t){return t.tolerant||e.path&&e.path.match(f)?e.path=(e.path||"").toLowerCase():e.scheme=void 0,n.SCHEMES.urn.serialize(e,t)}}}()},{"../uri":62}],62:[function(e,t,r){var n=!1,o=!0,i=!0,s=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(e.length>1){e[0]=e[0].slice(0,-1);for(var r=e.length-1,n=1;r>n;++n)e[n]=e[n].slice(1,-1);return e[r]=e[r].slice(1),e.join("")}return e[0]}function t(e){return"(?:"+e+")"}function r(r){var n="[A-Za-z]",o="[0-9]",s=e(o,"[A-Fa-f]"),a=t(t("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+t("%[89A-Fa-f]"+s+"%"+s+s)+"|"+t("%"+s+s)),u="[\\:\\/\\?\\#\\[\\]\\@]",c="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",f=e(u,c),p=r?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",l=r?"[\\uE000-\\uF8FF]":"[]",h=e(n,o,"[\\-\\.\\_\\~]",p),d=t(n+e(n,o,"[\\+\\-\\.]")+"*"),y=t(t(a+"|"+e(h,c,"[\\:]"))+"*"),v=t(t("25[0-5]")+"|"+t("2[0-4]"+o)+"|"+t("1"+o+o)+"|"+t("[1-9]"+o)+"|"+o),m=t(v+"\\."+v+"\\."+v+"\\."+v),g=t(s+"{1,4}"),b=(t(t(g+"\\:"+g)+"|"+m),t(e(h,c,"[\\:]")+"+")),w=t("v"+s+"+\\."+e(h,c,"[\\:]")+"+"),x=t("\\["+t(b+"|"+w)+"\\]"),E=t(t(a+"|"+e(h,c))+"*"),j=t(x+"|"+m+"(?!"+E+")|"+E),C=t(o+"*"),O=t(t(y+"@")+"?"+j+t("\\:"+C)+"?"),S=t(a+"|"+e(h,c,"[\\:\\@]")),P=t(S+"*"),T=t(S+"+"),_=t(t(a+"|"+e(h,c,"[\\@]"))+"+"),A=t(t("\\/"+P)+"*"),D=t("\\/"+t(T+A)+"?"),R=t(_+A),U=t(T+A),I="(?!"+S+")",N=(t(A+"|"+D+"|"+R+"|"+U+"|"+I),t(t(S+"|"+e("[\\/\\?]",l))+"*")),F=t(t(S+"|[\\/\\?]")+"*"),q=t(t("\\/\\/"+O+A)+"|"+D+"|"+U+"|"+I),k=t(d+"\\:"+q+t("\\?"+N)+"?"+t("\\#"+F)+"?"),H=t(t("\\/\\/"+O+A)+"|"+D+"|"+R+"|"+I),L=t(H+t("\\?"+N)+"?"+t("\\#"+F)+"?"),$=(t(k+"|"+L),t(d+"\\:"+q+t("\\?"+N)+"?"),"^("+d+")\\:"+t(t("\\/\\/("+t("("+y+")@")+"?("+j+")"+t("\\:("+C+")")+"?)")+"?("+A+"|"+D+"|"+U+"|"+I+")")+t("\\?("+N+")")+"?"+t("\\#("+F+")")+"?$"),z="^(){0}"+t(t("\\/\\/("+t("("+y+")@")+"?("+j+")"+t("\\:("+C+")")+"?)")+"?("+A+"|"+D+"|"+R+"|"+I+")")+t("\\?("+N+")")+"?"+t("\\#("+F+")")+"?$";"^("+d+")\\:"+t(t("\\/\\/("+t("("+y+")@")+"?("+j+")"+t("\\:("+C+")")+"?)")+"?("+A+"|"+D+"|"+U+"|"+I+")")+t("\\?("+N+")")+"?$","^"+t("\\#("+F+")")+"?$","^"+t("("+y+")@")+"?("+j+")"+t("\\:("+C+")")+"?$";return{URI_REF:i&&new RegExp("("+$+")|("+z+")"),NOT_SCHEME:new RegExp(e("[^]",n,o,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",h,c),"g"),NOT_HOST:new RegExp(e("[^\\%]",h,c),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",h,c),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",h,c),"g"),NOT_QUERY:new RegExp(e("[^\\%]",h,c,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",h,c,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",h,c),"g"),UNRESERVED:new RegExp(h,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",h,f),"g"),PCT_ENCODED:new RegExp(a,"g")}}function n(e){var t,r=e.charCodeAt(0);return t=16>r?"%0"+r.toString(16).toUpperCase():128>r?"%"+r.toString(16).toUpperCase():2048>r?"%"+(r>>6|192).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase():"%"+(r>>12|224).toString(16).toUpperCase()+"%"+(r>>6&63|128).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase()}function s(e){for(var t,r,n,o="",i=0,s=e.length;s>i;)t=parseInt(e.substr(i+1,2),16),128>t?(o+=String.fromCharCode(t),i+=3):t>=194&&224>t?(s-i>=6?(r=parseInt(e.substr(i+4,2),16),o+=String.fromCharCode((31&t)<<6|63&r)):o+=e.substr(i,6),i+=6):t>=224?(s-i>=9?(r=parseInt(e.substr(i+4,2),16),n=parseInt(e.substr(i+7,2),16),o+=String.fromCharCode((15&t)<<12|(63&r)<<6|63&n)):o+=e.substr(i,9),i+=9):(o+=e.substr(i,3),i+=3);return o}function u(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function c(e){return e.toUpperCase()}function f(e,t){function r(e){var r=s(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,n).replace(t.PCT_ENCODED,c)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,n).replace(t.PCT_ENCODED,c)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,n).replace(t.PCT_ENCODED,c)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,n).replace(t.PCT_ENCODED,c)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,n).replace(t.PCT_ENCODED,c)),e}function p(e,t){void 0===t&&(t={});var r,n,u=o&&t.iri!==!1?E:x,c=!1,p={};if("suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e),i?(r=e.match(u.URI_REF),r&&(r=r[1]?r.slice(1,10):r.slice(10,19)),r||(c=!0,t.tolerant||(p.error=p.error||"URI is not strictly valid."),r=e.match(j))):r=e.match(j),r){if(T?(p.scheme=r[1],p.userinfo=r[3],p.host=r[4],p.port=parseInt(r[5],10),p.path=r[6]||"",p.query=r[7],p.fragment=r[8],isNaN(p.port)&&(p.port=r[5])):(p.scheme=r[1]||void 0,p.userinfo=-1!==e.indexOf("@")?r[3]:void 0,p.host=-1!==e.indexOf("//")?r[4]:void 0,p.port=parseInt(r[5],10),p.path=r[6]||"",p.query=-1!==e.indexOf("?")?r[7]:void 0,p.fragment=-1!==e.indexOf("#")?r[8]:void 0,isNaN(p.port)&&(p.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),void 0!==p.scheme||void 0!==p.userinfo||void 0!==p.host||void 0!==p.port||p.path||void 0!==p.query?void 0===p.scheme?p.reference="relative":void 0===p.fragment?p.reference="absolute":p.reference="uri":p.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==p.reference&&(p.error=p.error||"URI is not a "+t.reference+" reference."),n=_[(t.scheme||p.scheme||"").toLowerCase()],!o||"undefined"==typeof a||t.unicodeSupport||n&&n.unicodeSupport)f(p,u);else{if(p.host&&(t.domainHost||n&&n.domainHost))try{p.host=a.toASCII(p.host.replace(u.PCT_ENCODED,s).toLowerCase())}catch(l){p.error=p.error||"Host's domain name can not be converted to ASCII via punycode: "+l}f(p,x)}n&&n.parse&&n.parse(p,t)}else c=!0,p.error=p.error||"URI can not be parsed.";return p}function l(e,t){var r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(e.host),"number"==typeof e.port&&(r.push(":"),r.push(e.port.toString(10))),r.length?r.join(""):void 0}function h(e){for(var t,r=[];e.length;)e.match(C)?e=e.replace(C,""):e.match(O)?e=e.replace(O,"/"):e.match(S)?(e=e.replace(S,"/"),r.pop()):"."===e||".."===e?e="":(t=e.match(P)[0],e=e.slice(t.length),r.push(t));return r.join("")}function d(e,t){void 0===t&&(t={});var r,n,i,u=o&&t.iri?E:x,c=[];if(r=_[(t.scheme||e.scheme||"").toLowerCase()],r&&r.serialize&&r.serialize(e,t),o&&"undefined"!=typeof a&&e.host&&(t.domainHost||r&&r.domainHost))try{e.host=t.iri?a.toUnicode(e.host):a.toASCII(e.host.replace(u.PCT_ENCODED,s).toLowerCase())}catch(p){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+p}return f(e,u),"suffix"!==t.reference&&e.scheme&&(c.push(e.scheme),c.push(":")),n=l(e,t),void 0!==n&&("suffix"!==t.reference&&c.push("//"),c.push(n),e.path&&"/"!==e.path.charAt(0)&&c.push("/")),void 0!==e.path&&(i=e.path,t.absolutePath||r&&r.absolutePath||(i=h(i)),void 0===n&&(i=i.replace(/^\/\//,"/%2F")),c.push(i)),void 0!==e.query&&(c.push("?"),c.push(e.query)),void 0!==e.fragment&&(c.push("#"),c.push(e.fragment)),c.join("")}function y(e,t,r,n){void 0===r&&(r={});var o={};return n||(e=p(d(e,r),r),t=p(d(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=h(t.path),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=h(t.path),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=h(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=h(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function v(e,t,r){return d(y(p(e,r),p(t,r),r,!0),r)}function m(e,t){return"string"==typeof e?e=d(p(e,t),t):"object"===u(e)&&(e=p(d(e,t),t)),e}function g(e,t,r){return"string"==typeof e?e=d(p(e,r),r):"object"===u(e)&&(e=d(e,r)),"string"==typeof t?t=d(p(t,r),r):"object"===u(t)&&(t=d(t,r)),e===t}function b(e,t){return e&&e.toString().replace(o&&t&&t.iri?E.ESCAPE:x.ESCAPE,n)}function w(e,t){return e&&e.toString().replace(o&&t&&t.iri?E.PCT_ENCODED:x.PCT_ENCODED,s)}var x=r(!1),E=o?r(!0):void 0,j=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,C=/^\.\.?\//,O=/^\/\.(\/|$)/,S=/^\/\.\.(\/|$)/,P=/^\/?(?:.|\n)*?(?=\/|$)/,T=void 0==="".match(/(){0}/)[1],_={};return{IRI_SUPPORT:o,VALIDATE_SUPPORT:i,pctEncChar:n,pctDecChars:s,SCHEMES:_,parse:p,_recomposeAuthority:l,removeDotSegments:h,serialize:d,resolveComponents:y,resolve:v,normalize:m,equal:g,escapeComponent:b,unescapeComponent:w}}();if(!n&&"undefined"!=typeof t&&"function"==typeof e){var a=e("./punycode");t.exports=s,e("./schemes")}},{"./punycode":57,"./schemes":58}]},{},[1])(1)});